<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-back-button
      slot="start"
      defaultHref=""
      (click)="dismiss()"
    ></ion-back-button>
    <ion-title>Details</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
  <!-- <div *ngIf="loader; else otherContent">
    <app-skeleton></app-skeleton>
  </div>
  <ng-template #otherContent> -->
    <ion-accordion-group value="first" class="ion-padding">
      <ng-container *ngIf="user.role == 'ATTENDER' && !!data.location">
        <ion-accordion value="first" *ngIf="!!data.location">
          <ion-item slot="header" color="light">
            <i class="fa-solid fa-file-lines"></i>
            <ion-label class="ion-padding-horizontal"
              >Blood Bank Details</ion-label
            >
          </ion-item>
          <div class="ion-padding accordion-collapsed" slot="content">
            <ion-card>
              <ion-card-content>
                <ion-grid>
                  <ion-row>
                    <ion-col size="12">
                      <ion-label class="head">Blood Bank Name </ion-label>
                      <ion-label> : {{data?.bloodBankName}}</ion-label>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col size="12">
                      <ion-label class="head">Location </ion-label>
                      <ion-label> : {{data?.location}}</ion-label>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col size="12">
                      <ion-label class="head">Donation Date </ion-label>
                      <ion-label> : {{data?.donationDate | date}}</ion-label>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col *ngIf="data.status == 'ALLOCATED'">
                      <ion-button (click)="statusUpdate('ACCEPTED')"
                        >Accept</ion-button
                      >
                    </ion-col>
                    <ion-col *ngIf="data.status == 'ACCEPTED'">
                      <ion-button (click)="statusUpdate('DONE')"
                        >Done</ion-button
                      >
                    </ion-col>
                  </ion-row>
                </ion-grid>
              </ion-card-content>
            </ion-card>
          </div>
        </ion-accordion>
      </ng-container>

      <ng-container *ngIf="user.role == 'ADMIN' && !data.bloodRequest">
        <ion-accordion value="first">
          <ion-item slot="header" color="light">
            <i class="fa-solid fa-file-lines"></i>
            <ion-label class="ion-padding-horizontal"
              >Blood Bank Details</ion-label
            >
          </ion-item>
          <div class="ion-padding accordion-collapsed" slot="content">
            <ion-card>
              <ion-card-content>
                <form [formGroup]="bloodDonateForm" *ngIf="edit">
                  <ion-row
                    class="ion-align-items-center ion-justify-content-center"
                  >
                    <ion-col size="12">
                      <ion-label position="floating" lablePlacement="stacked"
                        >Blood Bank</ion-label
                      >
                      <ion-item fill="outline" class="input">
                        <ion-input
                          placeholder="Blood Bank"
                          formControlName="bloodBankName"
                        ></ion-input>
                      </ion-item>
                    </ion-col>
                  </ion-row>

                  <ion-row
                    class="ion-align-items-center ion-justify-content-center"
                  >
                    <ion-col size="12">
                      <ion-label position="floating" lablePlacement="stacked"
                        >Location</ion-label
                      >
                      <ion-item fill="outline" class="input">
                        <ion-input
                          placeholder="Location"
                          formControlName="location"
                        ></ion-input>
                      </ion-item>
                    </ion-col>
                  </ion-row>
                  <ion-row
                    class="ion-align-items-center ion-justify-content-center"
                  >
                    <ion-col size="12">
                      <ion-label position="floating" lablePlacement="stacked"
                        >Donation Date</ion-label
                      >
                      <ion-item fill="outline">
                        <p class="ion-margin-end">
                          {{f['donationDate'].value}}
                        </p>
                        <ion-icon
                          slot="end"
                          color="primary"
                          name="calendar-outline"
                          datetime="datetime"
                          class="ion-margin-top"
                          (click)="openCalender(f['donationDate'].value)"
                        ></ion-icon>
                      </ion-item>
                    </ion-col>
                  </ion-row>
                  <ion-row class="ion-text-center">
                    <ion-col *ngIf="!data.location">
                      <ion-button expand="block" (click)="allocate()"
                        >Allocate</ion-button
                      >
                    </ion-col>
                    <ion-col *ngIf="data.location">
                      <ion-button expand="block" (click)="allocate()"
                        >Re-Allocate</ion-button
                      >
                    </ion-col>
                  </ion-row>
                </form>

                <ion-grid *ngIf="!edit">
                  <ion-item class="ion-no-padding ion-no-margin" lines="none">
                    <ion-icon *ngIf="data.status != 'DONE' && data.status != 'CLOSE'"
                      slot="end"
                      color="primary"
                      name="create-outline"
                      (click)="editData()"
                    ></ion-icon>
                  </ion-item>
                  <ion-row>
                    <ion-col size="12">
                      <ion-label class="head">Blood Bank Name </ion-label>
                      <ion-label> : {{data?.bloodBankName}}</ion-label>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col size="12">
                      <ion-label class="head">Location </ion-label>
                      <ion-label> : {{data?.location}}</ion-label>
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col size="12">
                      <ion-label class="head">Donation Date </ion-label>
                      <ion-label> : {{data?.donationDate | date}}</ion-label>
                    </ion-col>
                  </ion-row>
                </ion-grid>
              </ion-card-content>
            </ion-card>
          </div>
        </ion-accordion>
      </ng-container>

      <ion-accordion value="second" *ngIf="!!data.bloodRequest">
        <ion-item slot="header" color="light">
          <i class="fa-solid fa-droplet"></i>
          <ion-label class="ion-padding-horizontal">Beneficiary</ion-label>
        </ion-item>
        <div class="ion-padding" slot="content">
          <ion-card>
            <ion-card-content>
              <ion-grid>
                <ion-row>
                  <ion-col size="12">
                    <ion-label class="head">Name</ion-label>
                    <ion-label>: {{data?.bloodRequest?.name}}</ion-label>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col size="12">
                    <ion-label class="head">Age</ion-label>
                    <ion-label>: {{data?.bloodRequest?.age}}</ion-label>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col size="12">
                    <ion-label class="head">Gender</ion-label>
                    <ion-label>: {{data?.bloodRequest?.gender}}</ion-label>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col size="12">
                    <ion-label class="head">Blood Group</ion-label>
                    <ion-label>: {{data?.bloodRequest?.bloodGroup}}</ion-label>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col size="12">
                    <ion-label class="head">Blood Require Date</ion-label>
                    <ion-label
                      >: {{data?.bloodRequest?.bloodRequireDate}}</ion-label
                    >
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col size="12">
                    <ion-label class="head">State</ion-label>
                    <ion-label>: {{data?.bloodRequest?.state}}</ion-label>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col size="12">
                    <ion-label class="head">City</ion-label>
                    <ion-label>: {{data?.bloodRequest?.city}}</ion-label>
                  </ion-col>
                </ion-row>
                <ion-row *ngIf="data?.bloodRequest?.gender == 'FEMALE'">
                  <ion-col size="12">
                    <ion-label class="head">Father/Husband</ion-label>
                    <ion-label
                      >: {{data?.bloodRequest?.fatherOrHusband}}</ion-label
                    >
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col size="12">
                    <ion-label class="head">Hemoglobin</ion-label>
                    <ion-label>: {{data?.bloodRequest?.hemoglobin}}</ion-label>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col size="12">
                    <ion-label class="head">Illness</ion-label>
                    <ion-label>: {{data?.bloodRequest?.illness}}</ion-label>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col size="12">
                    <ion-label class="head">Location</ion-label>
                    <ion-label>: {{data?.bloodRequest?.location}}</ion-label>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col size="12">
                    <ion-label class="head">Mobile Number</ion-label>
                    <ion-label>: {{data?.bloodRequest?.mobileNo}}</ion-label>
                  </ion-col>
                </ion-row>

                <ion-row>
                  <ion-col size="12">
                    <ion-label class="head">Units</ion-label>
                    <ion-label>: {{data?.bloodRequest?.units}}</ion-label>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col *ngIf="data.status == 'ALLOCATED'">
                    <ion-button (click)="statusUpdate('ACCEPTED')"
                      >Accept</ion-button
                    >
                  </ion-col>
                  <ion-col *ngIf="data.status == 'ACCEPTED'">
                    <ion-button (click)="statusUpdate('DONE')">Done</ion-button>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-card-content>
          </ion-card>
        </div>
      </ion-accordion>
      <ion-accordion value="third">
        <ion-item slot="header" color="light">
          <i class="fa-solid fa-user"></i>
          <ion-label class="ion-padding-horizontal">Personal Details</ion-label>
        </ion-item>
        <div class="ion-padding" slot="content">
          <ion-card>
            <ion-card-content>
              <ion-grid>
                <ion-row>
                  <ion-col size="12">
                    <ion-label class="head">Name</ion-label>
                    <ion-label> : {{data?.name}}</ion-label>
                  </ion-col>

                  <ion-col size="6">
                    <ion-label class="head">Gender</ion-label>
                    <ion-label> : {{data?.gender}}</ion-label>
                  </ion-col>

                  <ion-col size="6">
                    <ion-label class="head">Age</ion-label>
                    <ion-label> : {{data?.age}}</ion-label>
                  </ion-col>

                  <ion-col size="6">
                    <ion-label class="head">State</ion-label>
                    <ion-label> : {{data?.state}}</ion-label>
                  </ion-col>

                  <ion-col size="6">
                    <ion-label class="head">City</ion-label>
                    <ion-label> : {{data?.city}}</ion-label>
                  </ion-col>

                  <ion-col size="6">
                    <ion-label class="head">Blood Group</ion-label>
                    <ion-label> : {{data?.bloodGroup}}</ion-label>
                  </ion-col>

                  <ion-col size="6">
                    <ion-label class="head">Hemoglobin</ion-label>
                    <ion-label> : {{data?.hemoglobin}}</ion-label>
                  </ion-col>

                  <ion-col size="12">
                    <ion-label class="head">Illness</ion-label>
                    <ion-label> : {{data?.illness}}</ion-label>
                  </ion-col>

                  <ion-col size="12">
                    <ion-label class="head">Mobile No</ion-label>
                    <ion-label> : {{data?.mobileNo}}</ion-label>
                  </ion-col>

                  <ion-col size="12">
                    <ion-label class="head">Donation Date</ion-label>
                    <ion-label> : {{data?.donationDate}}</ion-label>
                  </ion-col>

          
                </ion-row>
              </ion-grid>
            </ion-card-content>
          </ion-card>
        </div>
      </ion-accordion>
    </ion-accordion-group>
  <!-- </ng-template> -->
</ion-content>
